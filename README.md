# ESP32-S3 API Server

Сервер для проекта мониторинга усталости водителей

---

# Запуск сервиса

1. С помощью Docker запустить сервер

```bash
sudo docker run -d -p 8086:8086 -v "$PWD/data:/var/lib/influxdb2" -v "$PWD/config:/etc/influxdb2" influxdb:2
```

2. Установить виртуальное окружение и библиотеки

```bash
python3 -m venv venv
source venv/bin/activate
pip3 install -r requirements.txt
```

---

# Описание

Устройство ESP32 предназаначено для мониторинга активности пилотов. В случае перехода значения за порог, пользователь будет уведомлен о необходимости отдыха. Также в случае экстренных ситуаций ESP32 "уведомит" экстренные службы о потенциальном прошествии, например, при резкой смене сердцебиения и скорости движения.

Устройство ESP32-S3 передаёт следующие данные:

- Температура *(встроенный датчик)*
- Содержание CO2 в воздухе *(MQ-2)*
- Частота сердца и содержание кислорода в крови (MAX30302)
- GPS (Neo-6m), скорость.

От пользователя необходимы следующие параметры:

- Дата рождения (возраст)
- Рост
- Вес
- Оценка физической активности (от 1 до 5)
- (Опционально) Время сна за прошлую ночь (данные с MiBand)

На выходе мы получаем следующие результаты:

- Коэффициент усталости
- Время полёта/поездки
- Рекомендуемое время для восстановления сил